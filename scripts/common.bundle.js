webpackJsonp([1],[,,function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if("function"==typeof i){var a=n.get("buildHitTask");return{buildHitTask:function(n){n.set(e,null,!0),n.set(t,null,!0),i(n,r,o),a(n)}}}return b({},e,t)}function r(e,t){var n=(0,v.getAttributes)(e),i={};return Object.keys(n).forEach(function(e){if(0===e.indexOf(t)&&e!=t+"on"){var r=n[e];"true"==r&&(r=!0),"false"==r&&(r=!1);var o=l(e.slice(t.length));i[o]=r}}),i}function o(e){"loading"==document.readyState?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),e()}):e()}function a(e,t){var n=void 0;return function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];clearTimeout(n),n=setTimeout(function(){return e.apply(void 0,r)},t)}}function s(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3,n=!1,i=function(){n||(n=!0,e())};return setTimeout(i,t),i}function u(e,t){var n=e.get("trackingId"),i=y[n]=y[n]||{},r=function(){clearTimeout(i.timeout),i.send&&m.default.remove(e,"send",i.send),delete y[n],i.queue.forEach(function(e){return e()})};clearTimeout(i.timeout),i.timeout=setTimeout(r,0),i.queue=i.queue||[],i.queue.push(t),i.send||(i.send=function(e){return function(){r(),e.apply(void 0,arguments)}},m.default.add(e,"send",i.send))}function l(e){return e.replace(/[\-\_]+(\w?)/g,function(e,t){return t.toUpperCase()})}function c(e){return e.charAt(0).toUpperCase()+e.slice(1)}function h(e){return"object"==(void 0===e?"undefined":p(e))&&null!==e}function d(e){return Array.isArray(e)?e:[e]}function f(){return+new Date}Object.defineProperty(t,"__esModule",{value:!0}),t.uuid=t.assign=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.createFieldsObj=i,t.getAttributeFields=r,t.domReady=o,t.debounce=a,t.withTimeout=s,t.deferUntilPluginsLoaded=u,t.camelCase=l,t.capitalize=c,t.isObject=h,t.toArray=d,t.now=f;var v=n(5),g=n(6),m=function(e){return e&&e.__esModule?e:{default:e}}(g),y={},b=t.assign=Object.assign||function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(var r=0,o=n.length;r<o;r++){var a=Object(n[r]);for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e};t.uuid=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)}},function(e,t,n){"use strict";function i(e,t){var n=window.GoogleAnalyticsObject||"ga";window[n]=window[n]||function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];(window[n].q=window[n].q||[]).push(t)},window.gaDevIds=window.gaDevIds||[],window.gaDevIds.indexOf(r.DEV_ID)<0&&window.gaDevIds.push(r.DEV_ID),window[n]("provide",e,t),window.gaplugins=window.gaplugins||{},window.gaplugins[(0,o.capitalize)(e)]=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(7),o=n(2)},function(e,t,n){"use strict";function i(e,t){l(e),u(e,t)}function r(e){return parseInt(e||"0",16).toString(2)}function o(e){return parseInt(e||"0",2).toString(16)}function a(e,t){if(e.length<t)for(var n=t-e.length;n;)e="0"+e,n--;return e}function s(e,t){return e.substr(0,t)+1+e.substr(t+1)}function u(e,t){var n=e.get("&"+c.USAGE_PARAM),i=a(r(n),d);i=s(i,d-t),e.set("&"+c.USAGE_PARAM,o(i))}function l(e){e.set("&"+c.VERSION_PARAM,c.VERSION)}Object.defineProperty(t,"__esModule",{value:!0}),t.plugins=void 0,t.trackUsage=i;var c=n(7),h=t.plugins={CLEAN_URL_TRACKER:1,EVENT_TRACKER:2,IMPRESSION_TRACKER:3,MEDIA_QUERY_TRACKER:4,OUTBOUND_FORM_TRACKER:5,OUTBOUND_LINK_TRACKER:6,PAGE_VISIBILITY_TRACKER:7,SOCIAL_WIDGET_TRACKER:8,URL_CHANGE_TRACKER:9,MAX_SCROLL_TRACKER:10},d=Object.keys(h).length},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.parseUrl=t.parents=t.matches=t.getAttributes=t.dispatch=t.delegate=t.closest=void 0;var r=n(15),o=i(r),a=n(158),s=i(a),u=n(159),l=i(u),c=n(160),h=i(c),d=n(9),f=i(d),p=n(16),v=i(p),g=n(161),m=i(g);t.closest=o.default,t.delegate=s.default,t.dispatch=l.default,t.getAttributes=h.default,t.matches=f.default,t.parents=v.default,t.parseUrl=m.default},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){var n=a.filter(function(n){return n.context==e&&n.methodName==t})[0];return n||(n=new s(e,t),a.push(n)),n}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=[],s=function(){function e(t,n){var r=this;i(this,e),this.context=t,this.methodName=n,this.isTask=/Task$/.test(n),this.originalMethodReference=this.isTask?t.get(n):t[n],this.methodChain=[],this.boundMethodChain=[],this.wrappedMethod=function(){return r.boundMethodChain[r.boundMethodChain.length-1].apply(void 0,arguments)},this.isTask?t.set(n,this.wrappedMethod):t[n]=this.wrappedMethod}return o(e,null,[{key:"add",value:function(e,t,n){r(e,t).add(n)}},{key:"remove",value:function(e,t,n){r(e,t).remove(n)}}]),o(e,[{key:"add",value:function(e){this.methodChain.push(e),this.rebindMethodChain()}},{key:"remove",value:function(e){var t=this.methodChain.indexOf(e);t>-1&&(this.methodChain.splice(t,1),this.methodChain.length>0?this.rebindMethodChain():this.destroy())}},{key:"rebindMethodChain",value:function(){this.boundMethodChain=[];for(var e,t=0;e=this.methodChain[t];t++){var n=this.boundMethodChain[t-1]||this.originalMethodReference.bind(this.context);this.boundMethodChain.push(e(n))}}},{key:"destroy",value:function(){var e=a.indexOf(this);e>-1&&(a.splice(e,1),this.isTask?this.context.set(this.methodName,this.originalMethodReference):this.context[this.methodName]=this.originalMethodReference)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION="2.4.1",t.DEV_ID="i5iSjo",t.VERSION_PARAM="_av",t.USAGE_PARAM="_au",t.NULL_DIMENSION="(not set)"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=window.location.pathname,r=location.href.indexOf("kachick")>-1;t.CURRENT_PATH=i,t.IS_PROD=r},function(e,t,n){"use strict";function i(e,t){if(e&&1==e.nodeType&&t){if("string"==typeof t||1==t.nodeType)return e==t||r(e,t);if("length"in t)for(var n,i=0;n=t[i];i++)if(e==n||r(e,n))return!0}return!1}function r(e,t){if("string"!=typeof t)return!1;if(a)return a.call(e,t);for(var n,i=e.parentNode.querySelectorAll(t),r=0;n=i[r];r++)if(n==e)return!0;return!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=window.Element.prototype,a=o.matches||o.matchesSelector||o.webkitMatchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function a(){window.addEventListener("storage",u),v=!0}function s(){window.removeEventListener("storage",u),v=!1}function u(e){var t=p[e.key];if(t){var n=(0,f.assign)({},t.defaults_,l(e.oldValue)),i=(0,f.assign)({},t.defaults_,l(e.newValue));t.cache_=i,t.emit("externalSet",i,n)}}function l(e){var t={};if(e)try{t=JSON.parse(e)}catch(e){}return t}Object.defineProperty(t,"__esModule",{value:!0});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=n(165),d=function(e){return e&&e.__esModule?e:{default:e}}(h),f=n(2),p={},v=!1,g=void 0,m=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var o=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return o.key_=e,o.defaults_=n,o.cache_=null,o}return o(t,e),c(t,null,[{key:"getOrCreate",value:function(e,n,i){var r=["autotrack",e,n].join(":");return p[r]||(p[r]=new t(r,i),v||a()),p[r]}},{key:"isSupported_",value:function(){if(null!=g)return g;try{window.localStorage.setItem("autotrack","autotrack"),window.localStorage.removeItem("autotrack"),g=!0}catch(e){g=!1}return g}},{key:"get_",value:function(e){return window.localStorage.getItem(e)}},{key:"set_",value:function(e,t){window.localStorage.setItem(e,t)}},{key:"clear_",value:function(e){window.localStorage.removeItem(e)}}]),c(t,[{key:"get",value:function(){if(this.cache_)return this.cache_;if(t.isSupported_())try{this.cache_=l(t.get_(this.key_))}catch(e){}return this.cache_=(0,f.assign)({},this.defaults_,this.cache_)}},{key:"set",value:function(e){if(this.cache_=(0,f.assign)({},this.defaults_,this.cache_,e),t.isSupported_())try{t.set_(this.key_,JSON.stringify(this.cache_))}catch(e){}}},{key:"clear",value:function(){if(this.cache_={},t.isSupported_())try{t.clear_(this.key_)}catch(e){}}},{key:"destroy",value:function(){delete p[this.key_],Object.keys(p).length||s()}}]),t}(d.default);t.default=m},,,,function(e,t,n){"use strict";n(135),n(145),n(146)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e&&1==e.nodeType&&t)for(var i,r=(n?[e]:[]).concat((0,u.default)(e)),o=0;i=r[o];o++)if((0,a.default)(i,t))return i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(9),a=i(o),s=n(16),u=i(s)},function(e,t,n){"use strict";function i(e){for(var t=[];e&&e.parentNode&&1==e.parentNode.nodeType;)e=e.parentNode,t.push(e);return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(6),s=i(a),u=n(10),l=i(u),c=n(2),h={},d=function(){function e(t,n,i){r(this,e),this.tracker=t,this.timeout=n||e.DEFAULT_TIMEOUT,this.timeZone=i,this.sendHitTaskOverride=this.sendHitTaskOverride.bind(this),s.default.add(t,"sendHitTask",this.sendHitTaskOverride);try{this.dateTimeFormatter=new Intl.DateTimeFormat("en-US",{timeZone:this.timeZone})}catch(e){}var o={hitTime:0,isExpired:!1};this.store=l.default.getOrCreate(t.get("trackingId"),"session",o),this.store.get().id||this.store.set({id:(0,c.uuid)()})}return o(e,null,[{key:"getOrCreate",value:function(t,n,i){var r=t.get("trackingId");return h[r]?h[r]:h[r]=new e(t,n,i)}}]),o(e,[{key:"getId",value:function(){return this.store.get().id}},{key:"isExpired",value:function(){if((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getId())!=this.getId())return!0;var e=this.store.get();if(e.isExpired)return!0;var t=e.hitTime;if(t){var n=new Date,i=new Date(t);if(n-i>6e4*this.timeout||this.datesAreDifferentInTimezone(n,i))return!0}return!1}},{key:"datesAreDifferentInTimezone",value:function(e,t){return!!this.dateTimeFormatter&&this.dateTimeFormatter.format(e)!=this.dateTimeFormatter.format(t)}},{key:"sendHitTaskOverride",value:function(e){var t=this;return function(n){e(n);var i=n.get("sessionControl"),r="start"==i||t.isExpired(),o="end"==i,a=t.store.get();a.hitTime=(0,c.now)(),r&&(a.isExpired=!1,a.id=(0,c.uuid)()),o&&(a.isExpired=!0),t.store.set(a)}}},{key:"destroy",value:function(){s.default.remove(this.tracker,"sendHitTask",this.sendHitTaskOverride),this.store.destroy(),delete h[this.tracker.get("trackingId")]}}]),e}();t.default=d,d.DEFAULT_TIMEOUT=30},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n(136),n(137),n(138),n(139),n(140),n(141),n(142),n(143),n(144)},function(e,t,n){e.exports=n.p+"assets/logo/logo_black@web.png"},function(e,t,n){e.exports=n.p+"assets/logo/logo_white@web.png"},function(e,t,n){e.exports=n.p+"assets/img/hero_01@web.jpg"},function(e,t,n){e.exports=n.p+"assets/img/hero_02@web.jpg"},function(e,t,n){e.exports=n.p+"assets/img/hero_03@web.jpg"},function(e,t,n){e.exports=n.p+"assets/img/hero_01@mobile.jpg"},function(e,t,n){e.exports=n.p+"assets/img/hero_02@mobile.jpg"},function(e,t,n){e.exports=n.p+"assets/img/hero_03@mobile.jpg"},function(e,t,n){e.exports=n.p+"assets/png/loader.gif"},function(e,t){},function(e,t,n){"use strict";n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155)},function(e,t,n){"use strict";(function(e){/*!
Waypoints - 4.0.0
Copyright Â© 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/
!function(){function e(i){if(!i)throw new Error("No options passed to Waypoint constructor");if(!i.element)throw new Error("No element option passed to Waypoint constructor");if(!i.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,i),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=i.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),n[this.key]=this,t+=1}var t=0,n={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete n[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var t=[];for(var i in n)t.push(n[i]);for(var r=0,o=t.length;o>r;r++)t[r][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.invokeAll("enable")},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=r.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+n,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,i[e.waypointContextKey]=this,n+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var n=0,i={},r=window.Waypoint,o=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&t&&(this.adapter.off(".waypoints"),delete i[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,r.requestAnimationFrame(e))})},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){(!t.didScroll||r.isTouch)&&(t.didScroll=!0,r.requestAnimationFrame(e))})},t.prototype.handleResize=function(){r.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var n in t){var i=t[n],r=i.newScroll>i.oldScroll,o=r?i.forward:i.backward;for(var a in this.waypoints[n]){var s=this.waypoints[n][a],u=i.oldScroll<s.triggerPoint,l=i.newScroll>=s.triggerPoint,c=u&&l,h=!u&&!l;(c||h)&&(s.queueTrigger(o),e[s.group.id]=s.group)}}for(var d in e)e[d].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element==this.element.window?r.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element==this.element.window?r.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var n in this.waypoints[t])e.push(this.waypoints[t][n]);for(var i=0,r=e.length;r>i;i++)e[i].destroy()},t.prototype.refresh=function(){var e,t=this.element==this.element.window,n=t?void 0:this.adapter.offset(),i={};this.handleScroll(),e={horizontal:{contextOffset:t?0:n.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:n.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var o in e){var a=e[o];for(var s in this.waypoints[o]){var u,l,c,h,d,f=this.waypoints[o][s],p=f.options.offset,v=f.triggerPoint,g=0,m=null==v;f.element!==f.element.window&&(g=f.adapter.offset()[a.offsetProp]),"function"==typeof p?p=p.apply(f):"string"==typeof p&&(p=parseFloat(p),f.options.offset.indexOf("%")>-1&&(p=Math.ceil(a.contextDimension*p/100))),u=a.contextScroll-a.contextOffset,f.triggerPoint=g+u-p,l=v<a.oldScroll,c=f.triggerPoint>=a.oldScroll,h=l&&c,d=!l&&!c,!m&&h?(f.queueTrigger(a.backward),i[f.group.id]=f.group):!m&&d?(f.queueTrigger(a.forward),i[f.group.id]=f.group):m&&a.oldScroll>=f.triggerPoint&&(f.queueTrigger(a.forward),i[f.group.id]=f.group)}}return r.requestAnimationFrame(function(){for(var e in i)i[e].flushTriggers()}),this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in i)i[e].refresh()},t.findByElement=function(e){return i[e.waypointContextKey]},window.onload=function(){o&&o(),t.refreshAll()},r.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},r.Context=t}(),function(){function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function n(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),i[this.axis][this.name]=this}var i={vertical:{},horizontal:{}},r=window.Waypoint;n.prototype.add=function(e){this.waypoints.push(e)},n.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},n.prototype.flushTriggers=function(){for(var n in this.triggerQueues){var i=this.triggerQueues[n],r="up"===n||"left"===n;i.sort(r?t:e);for(var o=0,a=i.length;a>o;o+=1){var s=i[o];(s.options.continuous||o===i.length-1)&&s.trigger([n])}}this.clearTriggerQueues()},n.prototype.next=function(t){this.waypoints.sort(e);var n=r.Adapter.inArray(t,this.waypoints);return n===this.waypoints.length-1?null:this.waypoints[n+1]},n.prototype.previous=function(t){this.waypoints.sort(e);var n=r.Adapter.inArray(t,this.waypoints);return n?this.waypoints[n-1]:null},n.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},n.prototype.remove=function(e){var t=r.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},n.prototype.first=function(){return this.waypoints[0]},n.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},n.findOrCreate=function(e){return i[e.axis][e.name]||new n(e)},r.Group=n}(),function(){function t(e){this.$element=n(e)}var n=e,i=window.Waypoint;n.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,n){t.prototype[n]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[n].apply(this.$element,e)}}),n.each(["extend","inArray","isEmptyObject"],function(e,i){t[i]=n[i]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){function t(e){return function(){var t=[],i=arguments[0];return e.isFunction(arguments[0])&&(i=e.extend({},arguments[1]),i.handler=arguments[0]),this.each(function(){var r=e.extend({},i,{element:this});"string"==typeof r.context&&(r.context=e(this).closest(r.context)[0]),t.push(new n(r))}),t}}var n=window.Waypoint;e&&(e.fn.waypoint=t(e)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}()}).call(t,n(1))},function(e,t,n){"use strict";var i,r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(a){r=[n(1)],i=a,void 0!==(o="function"==typeof i?i.apply(t,r):i)&&(e.exports=o)}(function(e){function t(e,t){return e.toFixed(t.decimals)}var n=function t(n,i){this.$element=e(n),this.options=e.extend({},t.DEFAULTS,this.dataOptions(),i),this.init()};n.DEFAULTS={from:0,to:0,speed:1e3,refreshInterval:100,decimals:0,formatter:t,onUpdate:null,onComplete:null},n.prototype.init=function(){this.value=this.options.from,this.loops=Math.ceil(this.options.speed/this.options.refreshInterval),this.loopCount=0,this.increment=(this.options.to-this.options.from)/this.loops},n.prototype.dataOptions=function(){var e={from:this.$element.data("from"),to:this.$element.data("to"),speed:this.$element.data("speed"),refreshInterval:this.$element.data("refresh-interval"),decimals:this.$element.data("decimals")},t=Object.keys(e);for(var n in t){var i=t[n];void 0===e[i]&&delete e[i]}return e},n.prototype.update=function(){this.value+=this.increment,this.loopCount++,this.render(),"function"==typeof this.options.onUpdate&&this.options.onUpdate.call(this.$element,this.value),this.loopCount>=this.loops&&(clearInterval(this.interval),this.value=this.options.to,"function"==typeof this.options.onComplete&&this.options.onComplete.call(this.$element,this.value))},n.prototype.render=function(){var e=this.options.formatter.call(this.$element,this.value,this.options);this.$element.text(e)},n.prototype.restart=function(){this.stop(),this.init(),this.start()},n.prototype.start=function(){this.stop(),this.render(),this.interval=setInterval(this.update.bind(this),this.options.refreshInterval)},n.prototype.stop=function(){this.interval&&clearInterval(this.interval)},n.prototype.toggle=function(){this.interval?this.stop():this.start()},e.fn.countTo=function(t){return this.each(function(){var i=e(this),r=i.data("countTo"),o=!r||"object"===(void 0===t?"undefined":a(t)),s="object"===(void 0===t?"undefined":a(t))?t:{},u="string"==typeof t?t:"start";o&&(r&&r.stop(),i.data("countTo",r=new n(this,s))),r[u].call(r)})}})},function(e,t,n){"use strict";(function(i){var r,o,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};/**!
 * easy-pie-chart
 * Lightweight plugin to render simple, animated and retina optimized pie charts
 *
 * @license 
 * @author Robert Fleischmann <rendro87@gmail.com> (http://robert-fleischmann.de)
 * @version 2.1.7
 **/
!function(i,a){r=[n(1)],void 0!==(o=function(e){return a(e)}.apply(t,r))&&(e.exports=o)}(0,function(e){var t=function(e,t){var n,i=document.createElement("canvas");e.appendChild(i),"object"==("undefined"==typeof G_vmlCanvasManager?"undefined":a(G_vmlCanvasManager))&&G_vmlCanvasManager.initElement(i);var r=i.getContext("2d");i.width=i.height=t.size;var o=1;window.devicePixelRatio>1&&(o=window.devicePixelRatio,i.style.width=i.style.height=[t.size,"px"].join(""),i.width=i.height=t.size*o,r.scale(o,o)),r.translate(t.size/2,t.size/2),r.rotate((t.rotate/180-.5)*Math.PI);var s=(t.size-t.lineWidth)/2;t.scaleColor&&t.scaleLength&&(s-=t.scaleLength+2),Date.now=Date.now||function(){return+new Date};var u=function(e,t,n){n=Math.min(Math.max(-1,n||0),1);var i=0>=n;r.beginPath(),r.arc(0,0,s,0,2*Math.PI*n,i),r.strokeStyle=e,r.lineWidth=t,r.stroke()},l=function(){var e,n;r.lineWidth=1,r.fillStyle=t.scaleColor,r.save();for(var i=24;i>0;--i)i%6==0?(n=t.scaleLength,e=0):(n=.6*t.scaleLength,e=t.scaleLength-n),r.fillRect(-t.size/2+e,0,n,1),r.rotate(Math.PI/12);r.restore()},c=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),h=function(){t.scaleColor&&l(),t.trackColor&&u(t.trackColor,t.trackWidth||t.lineWidth,1)};this.getCanvas=function(){return i},this.getCtx=function(){return r},this.clear=function(){r.clearRect(t.size/-2,t.size/-2,t.size,t.size)},this.draw=function(e){t.scaleColor||t.trackColor?r.getImageData&&r.putImageData?n?r.putImageData(n,0,0):(h(),n=r.getImageData(0,0,t.size*o,t.size*o)):(this.clear(),h()):this.clear(),r.lineCap=t.lineCap;var i;i="function"==typeof t.barColor?t.barColor(e):t.barColor,u(i,t.lineWidth,e/100)}.bind(this),this.animate=function(e,n){var i=Date.now();t.onStart(e,n);var r=function(){var o=Math.min(Date.now()-i,t.animate.duration),a=t.easing(this,o,e,n-e,t.animate.duration);this.draw(a),t.onStep(e,n,a),o>=t.animate.duration?t.onStop(e,n):c(r)}.bind(this);c(r)}.bind(this)},n=function(e,n){var r={barColor:"#ef1e25",trackColor:"#f9f9f9",scaleColor:"#dfe0e0",scaleLength:5,lineCap:"round",lineWidth:3,trackWidth:void 0,size:110,rotate:0,animate:{duration:1e3,enabled:!0},easing:function(e,t,n,i,r){return t/=r/2,1>t?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},onStart:function(e,t){},onStep:function(e,t,n){},onStop:function(e,t){}};if(void 0!==t)r.renderer=t;else{if("undefined"==typeof SVGRenderer)throw new Error("Please load either the SVG- or the CanvasRenderer");r.renderer=SVGRenderer}var o={},a=0,s=function(){this.el=e,this.options=o;for(var t in r)r.hasOwnProperty(t)&&(o[t]=n&&void 0!==n[t]?n[t]:r[t],"function"==typeof o[t]&&(o[t]=o[t].bind(this)));"string"==typeof o.easing&&void 0!==i&&i.isFunction(i.easing[o.easing])?o.easing=i.easing[o.easing]:o.easing=r.easing,"number"==typeof o.animate&&(o.animate={duration:o.animate,enabled:!0}),"boolean"!=typeof o.animate||o.animate||(o.animate={duration:1e3,enabled:o.animate}),this.renderer=new o.renderer(e,o),this.renderer.draw(a),e.dataset&&e.dataset.percent?this.update(parseFloat(e.dataset.percent)):e.getAttribute&&e.getAttribute("data-percent")&&this.update(parseFloat(e.getAttribute("data-percent")))}.bind(this);this.update=function(e){return e=parseFloat(e),o.animate.enabled?this.renderer.animate(a,e):this.renderer.draw(e),a=e,this}.bind(this),this.disableAnimation=function(){return o.animate.enabled=!1,this},this.enableAnimation=function(){return o.animate.enabled=!0,this},s()};e.fn.easyPieChart=function(t){return this.each(function(){var i;e.data(this,"easyPieChart")||(i=e.extend({},t,e(this).data()),e.data(this,"easyPieChart",new n(this,i)))})}})}).call(t,n(1))},function(e,t,n){"use strict";(function(e){e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,i,r,o){return e.easing[e.easing.def](t,n,i,r,o)},easeInQuad:function(e,t,n,i,r){return i*(t/=r)*t+n},easeOutQuad:function(e,t,n,i,r){return-i*(t/=r)*(t-2)+n},easeInOutQuad:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t+n:-i/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,i,r){return i*(t/=r)*t*t+n},easeOutCubic:function(e,t,n,i,r){return i*((t=t/r-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t+n:i/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,i,r){return i*(t/=r)*t*t*t+n},easeOutQuart:function(e,t,n,i,r){return-i*((t=t/r-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t+n:-i/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,i,r){return i*(t/=r)*t*t*t*t+n},easeOutQuint:function(e,t,n,i,r){return i*((t=t/r-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,i,r){return(t/=r/2)<1?i/2*t*t*t*t*t+n:i/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,i,r){return-i*Math.cos(t/r*(Math.PI/2))+i+n},easeOutSine:function(e,t,n,i,r){return i*Math.sin(t/r*(Math.PI/2))+n},easeInOutSine:function(e,t,n,i,r){return-i/2*(Math.cos(Math.PI*t/r)-1)+n},easeInExpo:function(e,t,n,i,r){return 0==t?n:i*Math.pow(2,10*(t/r-1))+n},easeOutExpo:function(e,t,n,i,r){return t==r?n+i:i*(1-Math.pow(2,-10*t/r))+n},easeInOutExpo:function(e,t,n,i,r){return 0==t?n:t==r?n+i:(t/=r/2)<1?i/2*Math.pow(2,10*(t-1))+n:i/2*(2-Math.pow(2,-10*--t))+n},easeInCirc:function(e,t,n,i,r){return-i*(Math.sqrt(1-(t/=r)*t)-1)+n},easeOutCirc:function(e,t,n,i,r){return i*Math.sqrt(1-(t=t/r-1)*t)+n},easeInOutCirc:function(e,t,n,i,r){return(t/=r/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+n:i/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)+n},easeOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(1==(t/=r))return n+i;if(a||(a=.3*r),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return s*Math.pow(2,-10*t)*Math.sin((t*r-o)*(2*Math.PI)/a)+i+n},easeInOutElastic:function(e,t,n,i,r){var o=1.70158,a=0,s=i;if(0==t)return n;if(2==(t/=r/2))return n+i;if(a||(a=r*(.3*1.5)),s<Math.abs(i)){s=i;var o=a/4}else var o=a/(2*Math.PI)*Math.asin(i/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*-.5+n:s*Math.pow(2,-10*(t-=1))*Math.sin((t*r-o)*(2*Math.PI)/a)*.5+i+n},easeInBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*(t/=r)*t*((o+1)*t-o)+n},easeOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),i*((t=t/r-1)*t*((o+1)*t+o)+1)+n},easeInOutBack:function(e,t,n,i,r,o){return void 0==o&&(o=1.70158),(t/=r/2)<1?i/2*(t*t*((1+(o*=1.525))*t-o))+n:i/2*((t-=2)*t*((1+(o*=1.525))*t+o)+2)+n},easeInBounce:function(t,n,i,r,o){return r-e.easing.easeOutBounce(t,o-n,0,r,o)+i},easeOutBounce:function(e,t,n,i,r){return(t/=r)<1/2.75?i*(7.5625*t*t)+n:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+n:i*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,i,r,o){return n<o/2?.5*e.easing.easeInBounce(t,2*n,0,r,o)+i:.5*e.easing.easeOutBounce(t,2*n-o,0,r,o)+.5*r+i}})}).call(t,n(1))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){var e=function(){(0,r.default)(".js-counter").countTo({formatter:function(e,t){return e.toFixed(t.decimals)}})};!function(){var e=0;(0,r.default)(".animate-box").waypoint(function(t){"down"!==t||(0,r.default)(this.element).hasClass("animated-fast")||(e++,(0,r.default)(this.element).addClass("item-animate"),setTimeout(function(){(0,r.default)("body .animate-box.item-animate").each(function(e){var t=(0,r.default)(this);setTimeout(function(){var e=t.data("animate-effect");"fadeIn"===e?t.addClass("fadeIn animated-fast"):"fadeInLeft"===e?t.addClass("fadeInLeft animated-fast"):"fadeInRight"===e?t.addClass("fadeInRight animated-fast"):t.addClass("fadeInUp animated-fast"),t.removeClass("item-animate")},200*e,"easeInOutExpo")})},100))},{offset:"85%"})}(),function(){(0,r.default)(".kc-loader").fadeOut("slow")}(),e(),function(){(0,r.default)("#gtco-counter").length>0&&(0,r.default)("#gtco-counter").waypoint(function(t){"down"!==t||(0,r.default)(this.element).hasClass("animated")||(setTimeout(e,400),(0,r.default)(this.element).addClass("animated"))},{offset:"90%"})}()}()},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=e(".navbar-toggle");t.default=function(){n.click(function(){n.toggleClass("navbar-collapse-toggle"),e("#navbar-collapse").fadeToggle(200)}),e("#navbar-collapse").on("click",function(){n.toggleClass("navbar-collapse-toggle"),e("#navbar-collapse").fadeToggle(200)})}()}).call(t,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){e('a[href*="#"]:not([href="#"])').click(function(t){var n=e(this),i=e(n.attr("href"));e("html,body").stop().animate({scrollTop:i.offset().top-65},750),t.preventDefault()}),e("body").scrollspy({target:"#navigation",offset:65}),e("#navigation").affix({offset:{top:180}})}()}).call(t,n(1))},function(e,t,n){"use strict";(function(e){function n(){o.each(function(){var t=e(this).offset().top+e(this).outerHeight()/2;if(e(window).scrollTop()+e(window).height()>t&&1!=e(this).data("image-loaded")){var n=e(this).data("async-load");e(this).data("image-loaded",!0),e(this).css({"background-size":"cover","background-image":"url("+n+")"}).hide().fadeIn(1200),e(this).children(".hidden-contents-before-in-view").css("display","block")}})}function i(){a.each(function(){var t=e(this).data("async-load");1!=e(this).data("image-loaded")&&(e(this).data("image-loaded",!0),e(this).attr("src",t).css({width:"100%",height:"auto"}).hide().fadeIn(1200))})}Object.defineProperty(t,"__esModule",{value:!0});var r=e(".hidden-contents-before-in-view"),o=e(".hidden-images-before-in-view"),a=e(".hidden-images-before-page-loaded");t.default=function(){r.css("display","none"),e(document).ready(function(){i(),n(),e(window).scroll(n)})}()}).call(t,n(1))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),n(156),t.default=function(){e.IS_PROD&&(ga("create","UA-97037839-1","auto"),ga("require","eventTracker"),ga("require","maxScrollTracker",{sessionTimeout:240,timeZone:"Asia/Hong_Kong"}),ga("require","mediaQueryTracker",{definitions:[{name:"Breakpoint",dimensionIndex:1,items:[{name:"sm",media:"all"},{name:"md",media:"(min-width: 768px)"},{name:"lg",media:"(min-width: 992px)"}]},{name:"Pixel Density",dimensionIndex:2,items:[{name:"1x",media:"all"},{name:"1.5x",media:"(min-resolution: 144dpi)"},{name:"2x",media:"(min-resolution: 192dpi)"}]},{name:"Orientation",dimensionIndex:3,items:[{name:"landscape",media:"(orientation: landscape)"},{name:"portrait",media:"(orientation: portrait)"}]}]}),ga("require","outboundLinkTracker"),ga("require","urlChangeTracker"),ga("send","pageview"))}()}).call(t,n(8))},function(e,t,n){"use strict";n(157),n(162),n(163),n(164),n(166),n(167),n(168),n(169),n(170),n(171)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);i=!0);}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(5),u=n(7),l=n(6),c=i(l),h=n(3),d=i(h),f=n(4),p=n(2),v=function(){function e(t,n){r(this,e),(0,f.trackUsage)(t,f.plugins.CLEAN_URL_TRACKER);var i={};this.opts=(0,p.assign)(i,n),this.tracker=t,this.queryDimension=this.opts.stripQuery&&this.opts.queryDimensionIndex?"dimension"+this.opts.queryDimensionIndex:null,this.trackerGetOverride=this.trackerGetOverride.bind(this),this.buildHitTaskOverride=this.buildHitTaskOverride.bind(this),c.default.add(t,"get",this.trackerGetOverride),c.default.add(t,"buildHitTask",this.buildHitTaskOverride)}return a(e,[{key:"trackerGetOverride",value:function(e){var t=this;return function(n){if("page"==n||n==t.queryDimension){var i={location:e("location"),page:e("page")};return t.cleanUrlFields(i)[n]}return e(n)}}},{key:"buildHitTaskOverride",value:function(e){var t=this;return function(n){var i=t.cleanUrlFields({location:n.get("location"),page:n.get("page")});n.set(i,null,!0),e(n)}}},{key:"cleanUrlFields",value:function(e){var t=(0,s.parseUrl)(e.page||e.location),n=t.pathname;if(this.opts.indexFilename){var i=n.split("/");this.opts.indexFilename==i[i.length-1]&&(i[i.length-1]="",n=i.join("/"))}if("remove"==this.opts.trailingSlash)n=n.replace(/\/+$/,"");else if("add"==this.opts.trailingSlash){var r=/\.\w+$/.test(n);r||"/"==n.substr(-1)||(n+="/")}var o={page:n+(this.opts.stripQuery?this.stripNonWhitelistedQueryParams(t.search):t.search)};if(e.location&&(o.location=e.location),this.queryDimension&&(o[this.queryDimension]=t.search.slice(1)||u.NULL_DIMENSION),"function"==typeof this.opts.urlFieldsFilter){var a=this.opts.urlFieldsFilter(o,s.parseUrl),l={page:a.page,location:a.location};return this.queryDimension&&(l[this.queryDimension]=a[this.queryDimension]),l}return o}},{key:"stripNonWhitelistedQueryParams",value:function(e){var t=this;if(Array.isArray(this.opts.queryParamsWhitelist)){var n=[];return e.slice(1).split("&").forEach(function(e){var i=e.split("="),r=o(i,2),a=r[0],s=r[1];t.opts.queryParamsWhitelist.indexOf(a)>-1&&s&&n.push([a,s])}),n.length?"?"+n.map(function(e){return e.join("=")}).join("&"):""}return""}},{key:"remove",value:function(){c.default.remove(this.tracker,"get",this.trackerGetOverride),c.default.remove(this.tracker,"buildHitTask",this.buildHitTaskOverride)}}]),e}();(0,d.default)("cleanUrlTracker",v)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=function(e){var t=void 0;if(r.composed&&"function"==typeof e.composedPath)for(var o,s=e.composedPath(),l=0;o=s[l];l++)1==o.nodeType&&(0,u.default)(o,n)&&(t=o);else t=(0,a.default)(e.target,n,!0);t&&i.call(t,e,t)};return e.addEventListener(t,o,r.useCapture),{destroy:function(){e.removeEventListener(t,o,r.useCapture)}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(15),a=i(o),s=n(9),u=i(s)},function(e,t,n){"use strict";function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Event",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=void 0,a=void 0;"object"==(void 0===n?"undefined":r(n))&&(i=n,n="Event"),i.bubbles=i.bubbles||!1,i.cancelable=i.cancelable||!1,i.composed=i.composed||!1,"detail"in i&&(a=!0),n=a?"CustomEvent":n;try{o=new window[n](t,i)}catch(e){o=document.createEvent(n);var s="init"+(a?"Custom":"")+"Event";o[s](t,i.bubbles,i.cancelable,i.detail)}return e.dispatchEvent(o)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=i},function(e,t,n){"use strict";function i(e){var t={};if(!e||1!=e.nodeType)return t;var n=e.attributes;if(0===n.length)return{};for(var i,r=0;i=n[r];r++)t[i.name]=i.value;return t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i},function(e,t,n){"use strict";function i(e){if(e=e&&"."!=e?e:location.href,u[e])return u[e];if(s.href=e,"."==e.charAt(0)||"/"==e.charAt(0))return i(s.href);var t=s.port==r||s.port==o?"":s.port;t="0"==t?"":t;var n=s.host.replace(a,""),l=s.origin?s.origin:s.protocol+"//"+n,c="/"==s.pathname.charAt(0)?s.pathname:"/"+s.pathname;return u[e]={hash:s.hash,host:n,hostname:s.hostname,href:s.href,origin:l,pathname:c,port:t,protocol:s.protocol,search:s.search}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r="80",o="443",a=RegExp(":("+r+"|"+o+")$"),s=document.createElement("a"),u={}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5),a=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(4),l=n(2),c=function(){function e(t,n){var r=this;if(i(this,e),(0,u.trackUsage)(t,u.plugins.EVENT_TRACKER),window.addEventListener){var a={events:["click"],fieldsObj:{},attributePrefix:"ga-"};this.opts=(0,l.assign)(a,n),this.tracker=t,this.handleEvents=this.handleEvents.bind(this);var s="["+this.opts.attributePrefix+"on]";this.delegates={},this.opts.events.forEach(function(e){r.delegates[e]=(0,o.delegate)(document,e,s,r.handleEvents,{composed:!0,useCapture:!0})})}}return r(e,[{key:"handleEvents",value:function(e,t){var n=this.opts.attributePrefix;if(!(t.getAttribute(n+"on").split(/\s*,\s*/).indexOf(e.type)<0)){var i={transport:"beacon"},r=(0,l.getAttributeFields)(t,n),o=(0,l.assign)({},this.opts.fieldsObj,r),a=r.hitType||"event";this.tracker.send(a,(0,l.createFieldsObj)(i,o,this.tracker,this.opts.hitFilter,t,e))}}},{key:"remove",value:function(){var e=this;Object.keys(this.delegates).forEach(function(t){e.delegates[t].destroy()})}}]),e}();(0,s.default)("eventTracker",c)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(0===e){var n=t.intersectionRect;return n.top>0||n.bottom>0||n.left>0||n.right>0}return t.intersectionRatio>=e}function o(e){var t={threshold:0,trackFirstImpressionOnly:!0};return"string"==typeof e&&(e={id:e}),(0,c.assign)(t,e)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(4),c=n(2),h=function(){function e(t,n){var r=this;if(i(this,e),(0,l.trackUsage)(t,l.plugins.IMPRESSION_TRACKER),window.IntersectionObserver&&window.MutationObserver){var o={rootMargin:"0px",fieldsObj:{},attributePrefix:"ga-"};this.opts=(0,c.assign)(o,n),this.tracker=t,this.handleDomMutations=this.handleDomMutations.bind(this),this.handleIntersectionChanges=this.handleIntersectionChanges.bind(this),this.handleDomElementAdded=this.handleDomElementAdded.bind(this),this.handleDomElementRemoved=this.handleDomElementRemoved.bind(this),this.mutationObserver=null,this.items=[],this.elementMap={},this.thresholdMap={},(0,c.domReady)(function(){r.opts.elements&&r.observeElements(r.opts.elements)})}}return a(e,[{key:"observeElements",value:function(e){var t=this,n=this.deriveDataFromElements(e);this.items=this.items.concat(n.items),this.elementMap=(0,c.assign)({},n.elementMap,this.elementMap),this.thresholdMap=(0,c.assign)({},n.thresholdMap,this.thresholdMap),n.items.forEach(function(e){var n=t.thresholdMap[e.threshold]=t.thresholdMap[e.threshold]||new IntersectionObserver(t.handleIntersectionChanges,{rootMargin:t.opts.rootMargin,threshold:[+e.threshold]}),i=t.elementMap[e.id]||(t.elementMap[e.id]=document.getElementById(e.id));i&&n.observe(i)}),this.mutationObserver||(this.mutationObserver=new MutationObserver(this.handleDomMutations),this.mutationObserver.observe(document.body,{childList:!0,subtree:!0})),requestAnimationFrame(function(){})}},{key:"unobserveElements",value:function(e){var t=[],n=[];if(this.items.forEach(function(i){e.some(function(e){var t=o(e);return t.id===i.id&&t.threshold===i.threshold&&t.trackFirstImpressionOnly===i.trackFirstImpressionOnly})?n.push(i):t.push(i)}),t.length){var i=this.deriveDataFromElements(t),r=this.deriveDataFromElements(n);this.items=i.items,this.elementMap=i.elementMap,this.thresholdMap=i.thresholdMap,n.forEach(function(e){if(!i.elementMap[e.id]){var t=r.thresholdMap[e.threshold],n=r.elementMap[e.id];n&&t.unobserve(n),i.thresholdMap[e.threshold]||r.thresholdMap[e.threshold].disconnect()}})}else this.unobserveAllElements()}},{key:"unobserveAllElements",value:function(){var e=this;Object.keys(this.thresholdMap).forEach(function(t){e.thresholdMap[t].disconnect()}),this.mutationObserver.disconnect(),this.mutationObserver=null,this.items=[],this.elementMap={},this.thresholdMap={}}},{key:"deriveDataFromElements",value:function(e){var t=this,n=[],i={},r={};return e.length&&e.forEach(function(e){var a=o(e);n.push(a),r[a.id]=t.elementMap[a.id]||null,i[a.threshold]=t.thresholdMap[a.threshold]||null}),{items:n,elementMap:r,thresholdMap:i}}},{key:"handleDomMutations",value:function(e){for(var t,n=0;t=e[n];n++){for(var i,r=0;i=t.removedNodes[r];r++)this.walkNodeTree(i,this.handleDomElementRemoved);for(var o,a=0;o=t.addedNodes[a];a++)this.walkNodeTree(o,this.handleDomElementAdded)}}},{key:"walkNodeTree",value:function(e,t){1==e.nodeType&&e.id in this.elementMap&&t(e.id);for(var n,i=0;n=e.childNodes[i];i++)this.walkNodeTree(n,t)}},{key:"handleIntersectionChanges",value:function(e){for(var t,n=[],i=0;t=e[i];i++)for(var o,a=0;o=this.items[a];a++)t.target.id===o.id&&r(o.threshold,t)&&(this.handleImpression(o.id),o.trackFirstImpressionOnly&&n.push(o));n.length&&this.unobserveElements(n)}},{key:"handleImpression",value:function(e){var t=document.getElementById(e),n={transport:"beacon",eventCategory:"Viewport",eventAction:"impression",eventLabel:e,nonInteraction:!0},i=(0,c.assign)({},this.opts.fieldsObj,(0,c.getAttributeFields)(t,this.opts.attributePrefix));this.tracker.send("event",(0,c.createFieldsObj)(n,i,this.tracker,this.opts.hitFilter,t))}},{key:"handleDomElementAdded",value:function(e){var t=this,n=this.elementMap[e]=document.getElementById(e);this.items.forEach(function(i){e==i.id&&t.thresholdMap[i.threshold].observe(n)})}},{key:"handleDomElementRemoved",value:function(e){var t=this,n=this.elementMap[e];this.items.forEach(function(i){e==i.id&&t.thresholdMap[i.threshold].unobserve(n)}),this.elementMap[e]=null}},{key:"remove",value:function(){this.unobserveAllElements()}}]),e}();(0,u.default)("impressionTracker",h)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(){var e=document.documentElement,t=document.body;return Math.max(e.offsetHeight,e.scrollHeight,t.offsetHeight,t.scrollHeight)}var s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=n(5),l=n(6),c=i(l),h=n(3),d=i(h),f=n(17),p=i(f),v=n(10),g=i(v),m=n(4),y=n(2),b=function(){function e(t,n){if(o(this,e),(0,m.trackUsage)(t,m.plugins.MAX_SCROLL_TRACKER),window.addEventListener){var i={increaseThreshold:20,sessionTimeout:p.default.DEFAULT_TIMEOUT,fieldsObj:{}};this.opts=(0,y.assign)(i,n),this.tracker=t,this.pagePath=this.getPagePath(),this.handleScroll=(0,y.debounce)(this.handleScroll.bind(this),500),this.trackerSetOverride=this.trackerSetOverride.bind(this),this.store=g.default.getOrCreate(t.get("trackingId"),"plugins/max-scroll-tracker"),this.session=p.default.getOrCreate(t,this.opts.sessionTimeout,this.opts.timeZone),c.default.add(t,"set",this.trackerSetOverride),this.listenForMaxScrollChanges()}}return s(e,[{key:"listenForMaxScrollChanges",value:function(){this.getMaxScrollPercentageForCurrentPage()<100&&window.addEventListener("scroll",this.handleScroll)}},{key:"stopListeningForMaxScrollChanges",value:function(){window.removeEventListener("scroll",this.handleScroll)}},{key:"handleScroll",value:function(){var e=a(),t=window.pageYOffset,n=window.innerHeight,i=Math.min(100,Math.max(0,Math.round(t/(e-n)*100))),r=this.session.getId();if(r!=this.store.get().sessionId&&(this.store.clear(),this.store.set({sessionId:r})),this.session.isExpired(this.store.get().sessionId))this.store.clear();else{var o=this.getMaxScrollPercentageForCurrentPage();if(i>o){100!=i&&100!=o||this.stopListeningForMaxScrollChanges();var s=i-o;(100==i||s>=this.opts.increaseThreshold)&&(this.setMaxScrollPercentageForCurrentPage(i),this.sendMaxScrollEvent(s,i))}}}},{key:"trackerSetOverride",value:function(e){var t=this;return function(n,i){if(e(n,i),((0,y.isObject)(n)?n:r({},n,i)).page){var o=t.pagePath;t.pagePath=t.getPagePath(),t.pagePath!=o&&t.listenForMaxScrollChanges()}}}},{key:"sendMaxScrollEvent",value:function(e,t){var n={transport:"beacon",eventCategory:"Max Scroll",eventAction:"increase",eventValue:e,eventLabel:String(t),nonInteraction:!0};this.opts.maxScrollMetricIndex&&(n["metric"+this.opts.maxScrollMetricIndex]=e),this.tracker.send("event",(0,y.createFieldsObj)(n,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},{key:"setMaxScrollPercentageForCurrentPage",value:function(e){var t;this.store.set((t={},r(t,this.pagePath,e),r(t,"sessionId",this.session.getId()),t))}},{key:"getMaxScrollPercentageForCurrentPage",value:function(){return this.store.get()[this.pagePath]||0}},{key:"getPagePath",value:function(){var e=(0,u.parseUrl)(this.tracker.get("page")||this.tracker.get("location"));return e.pathname+e.search}},{key:"remove",value:function(){this.session.destroy(),this.stopListeningForMaxScrollChanges(),c.default.remove(this.tracker,"set",this.trackerSetOverride)}}]),e}();(0,d.default)("maxScrollTracker",b)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=function(){function e(){i(this,e),this.registry_={}}return r(e,[{key:"on",value:function(e,t){this.getRegistry_(e).push(t)}},{key:"off",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;if(e&&t){var n=this.getRegistry_(e),i=n.indexOf(t);i>-1&&n.splice(i,1)}else this.registry_={}}},{key:"emit",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.getRegistry_(e).forEach(function(e){return e.apply(void 0,n)})}},{key:"getEventCount",value:function(){var e=this,t=0;return Object.keys(this.registry_).forEach(function(n){t+=e.getRegistry_(n).length}),t}},{key:"getRegistry_",value:function(e){return this.registry_[e]=this.registry_[e]||[]}}]),e}();t.default=o},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){return h[e]||(h[e]=window.matchMedia(e))}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(7),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(4),c=n(2),h={},d=function(){function e(t,n){if(i(this,e),(0,l.trackUsage)(t,l.plugins.MEDIA_QUERY_TRACKER),window.matchMedia){var r={changeTemplate:this.changeTemplate,changeTimeout:1e3,fieldsObj:{}};this.opts=(0,c.assign)(r,n),(0,c.isObject)(this.opts.definitions)&&(this.opts.definitions=(0,c.toArray)(this.opts.definitions),this.tracker=t,this.changeListeners=[],this.processMediaQueries())}}return o(e,[{key:"processMediaQueries",value:function(){var e=this;this.opts.definitions.forEach(function(t){if(t.name&&t.dimensionIndex){var n=e.getMatchName(t);e.tracker.set("dimension"+t.dimensionIndex,n),e.addChangeListeners(t)}})}},{key:"getMatchName",value:function(e){var t=void 0;return e.items.forEach(function(e){r(e.media).matches&&(t=e)}),t?t.name:a.NULL_DIMENSION}},{key:"addChangeListeners",value:function(e){var t=this;e.items.forEach(function(n){var i=r(n.media),o=(0,c.debounce)(function(){t.handleChanges(e)},t.opts.changeTimeout);i.addListener(o),t.changeListeners.push({mql:i,fn:o})})}},{key:"handleChanges",value:function(e){var t=this.getMatchName(e),n=this.tracker.get("dimension"+e.dimensionIndex);if(t!==n){this.tracker.set("dimension"+e.dimensionIndex,t);var i={transport:"beacon",eventCategory:e.name,eventAction:"change",eventLabel:this.opts.changeTemplate(n,t),nonInteraction:!0};this.tracker.send("event",(0,c.createFieldsObj)(i,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}}},{key:"remove",value:function(){for(var e,t=0;e=this.changeListeners[t];t++)e.mql.removeListener(e.fn)}},{key:"changeTemplate",value:function(e,t){return e+" => "+t}}]),e}();(0,u.default)("mediaQueryTracker",d)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(5),a=n(3),s=function(e){return e&&e.__esModule?e:{default:e}}(a),u=n(4),l=n(2),c=function(){function e(t,n){if(i(this,e),(0,u.trackUsage)(t,u.plugins.OUTBOUND_FORM_TRACKER),window.addEventListener){var r={formSelector:"form",shouldTrackOutboundForm:this.shouldTrackOutboundForm,fieldsObj:{},attributePrefix:"ga-"};this.opts=(0,l.assign)(r,n),this.tracker=t,this.delegate=(0,o.delegate)(document,"submit",this.opts.formSelector,this.handleFormSubmits.bind(this),{composed:!0,useCapture:!0})}}return r(e,[{key:"handleFormSubmits",value:function(e,t){var n=(0,o.parseUrl)(t.action).href,i={transport:"beacon",eventCategory:"Outbound Form",eventAction:"submit",eventLabel:n};if(this.opts.shouldTrackOutboundForm(t,o.parseUrl)){navigator.sendBeacon||(e.preventDefault(),i.hitCallback=(0,l.withTimeout)(function(){t.submit()}));var r=(0,l.assign)({},this.opts.fieldsObj,(0,l.getAttributeFields)(t,this.opts.attributePrefix));this.tracker.send("event",(0,l.createFieldsObj)(i,r,this.tracker,this.opts.hitFilter,t,e))}}},{key:"shouldTrackOutboundForm",value:function(e,t){var n=t(e.action);return n.hostname!=location.hostname&&"http"==n.protocol.slice(0,4)}},{key:"remove",value:function(){this.delegate.destroy()}}]),e}();(0,s.default)("outboundFormTracker",c)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return!("click"!=e.type||"_blank"==t.target||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.which>1)}var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(5),s=n(3),u=function(e){return e&&e.__esModule?e:{default:e}}(s),l=n(4),c=n(2),h=function(){function e(t,n){var r=this;if(i(this,e),(0,l.trackUsage)(t,l.plugins.OUTBOUND_LINK_TRACKER),window.addEventListener){var o={events:["click"],linkSelector:"a, area",shouldTrackOutboundLink:this.shouldTrackOutboundLink,fieldsObj:{},attributePrefix:"ga-"};this.opts=(0,c.assign)(o,n),this.tracker=t,this.handleLinkInteractions=this.handleLinkInteractions.bind(this),this.delegates={},this.opts.events.forEach(function(e){r.delegates[e]=(0,a.delegate)(document,e,r.opts.linkSelector,r.handleLinkInteractions,{composed:!0,useCapture:!0})})}}return o(e,[{key:"handleLinkInteractions",value:function(e,t){var n=this;if(this.opts.shouldTrackOutboundLink(t,a.parseUrl)){var i=t.getAttribute("href")||t.getAttribute("xlink:href"),o=(0,a.parseUrl)(i),s={transport:"beacon",eventCategory:"Outbound Link",eventAction:e.type,eventLabel:o.href},u=(0,c.assign)({},this.opts.fieldsObj,(0,c.getAttributeFields)(t,this.opts.attributePrefix)),l=(0,c.createFieldsObj)(s,u,this.tracker,this.opts.hitFilter,t,e);if(!navigator.sendBeacon&&r(e,t)){var h=function t(){if(window.removeEventListener("click",t),!e.defaultPrevented){e.preventDefault();var r=l.hitCallback;l.hitCallback=(0,c.withTimeout)(function(){"function"==typeof r&&r(),location.href=i})}n.tracker.send("event",l)};window.addEventListener("click",h)}else this.tracker.send("event",l)}}},{key:"shouldTrackOutboundLink",value:function(e,t){var n=e.getAttribute("href")||e.getAttribute("xlink:href"),i=t(n);return i.hostname!=location.hostname&&"http"==i.protocol.slice(0,4)}},{key:"remove",value:function(){var e=this;Object.keys(this.delegates).forEach(function(t){e.delegates[t].destroy()})}}]),e}();(0,u.default)("outboundLinkTracker",h)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(7),u=n(6),l=i(u),c=n(3),h=i(c),d=n(17),f=i(d),p=n(10),v=i(p),g=n(4),m=n(2),y="visible",b=(0,m.uuid)(),w=1e3,k=function(){function e(t,n){var i=this;if(o(this,e),(0,g.trackUsage)(t,g.plugins.PAGE_VISIBILITY_TRACKER),document.visibilityState){var r={sessionTimeout:f.default.DEFAULT_TIMEOUT,visibleThreshold:5*w,sendInitialPageview:!1,fieldsObj:{}};this.opts=(0,m.assign)(r,n),this.tracker=t,this.lastPageState=document.visibilityState,this.visibleThresholdTimeout_=null,this.isInitialPageviewSent_=!1,this.trackerSetOverride=this.trackerSetOverride.bind(this),this.handleChange=this.handleChange.bind(this),this.handleWindowUnload=this.handleWindowUnload.bind(this),this.handleExternalStoreSet=this.handleExternalStoreSet.bind(this),this.store=v.default.getOrCreate(t.get("trackingId"),"plugins/page-visibility-tracker"),this.store.on("externalSet",this.handleExternalStoreSet),this.session=f.default.getOrCreate(t,this.opts.sessionTimeout,this.opts.timeZone),l.default.add(t,"set",this.trackerSetOverride),window.addEventListener("unload",this.handleWindowUnload),document.addEventListener("visibilitychange",this.handleChange),(0,m.deferUntilPluginsLoaded)(this.tracker,function(){document.visibilityState==y?(i.opts.sendInitialPageview&&(i.sendPageview({isPageLoad:!0}),i.isInitialPageviewSent_=!0),i.store.set({time:(0,m.now)(),state:y,pageId:b,sessionId:i.session.getId()})):i.opts.sendInitialPageview&&i.opts.pageLoadsMetricIndex&&i.sendPageLoad()})}}return a(e,[{key:"handleChange",value:function(){var e=this;if(document.visibilityState==y||"hidden"==document.visibilityState){var t=this.getAndValidateChangeData(),n={time:(0,m.now)(),state:document.visibilityState,pageId:b,sessionId:this.session.getId()};document.visibilityState==y&&this.opts.sendInitialPageview&&!this.isInitialPageviewSent_&&(this.sendPageview(),this.isInitialPageviewSent_=!0),"hidden"==document.visibilityState&&this.visibleThresholdTimeout_&&clearTimeout(this.visibleThresholdTimeout_),this.session.isExpired(t.sessionId)?(this.store.clear(),"hidden"==this.lastPageState&&document.visibilityState==y&&(clearTimeout(this.visibleThresholdTimeout_),this.visibleThresholdTimeout_=setTimeout(function(){e.store.set(n),e.sendPageview({hitTime:n.time})},this.opts.visibleThreshold))):(t.pageId==b&&t.state==y&&this.sendPageVisibilityEvent(t),this.store.set(n)),this.lastPageState=document.visibilityState}}},{key:"getAndValidateChangeData",value:function(){var e=this.store.get();return this.lastPageState==y&&"hidden"==e.state&&e.pageId!=b&&(e.state=y,e.pageId=b,this.store.set(e)),e}},{key:"sendPageVisibilityEvent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hitTime,i=this.getTimeSinceLastStoredChange(e,{hitTime:n});if(i&&i>=this.opts.visibleThreshold){var r=Math.round(i/w),o={transport:"beacon",nonInteraction:!0,eventCategory:"Page Visibility",eventAction:"track",eventValue:r,eventLabel:s.NULL_DIMENSION};n&&(o.queueTime=(0,m.now)()-n),this.opts.visibleMetricIndex&&(o["metric"+this.opts.visibleMetricIndex]=r),this.tracker.send("event",(0,m.createFieldsObj)(o,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}}},{key:"sendPageLoad",value:function(){var e,t=(e={transport:"beacon",eventCategory:"Page Visibility",eventAction:"page load",eventLabel:s.NULL_DIMENSION},r(e,"metric"+this.opts.pageLoadsMetricIndex,1),r(e,"nonInteraction",!0),e);this.tracker.send("event",(0,m.createFieldsObj)(t,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},{key:"sendPageview",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hitTime,n=e.isPageLoad,i={transport:"beacon"};t&&(i.queueTime=(0,m.now)()-t),n&&this.opts.pageLoadsMetricIndex&&(i["metric"+this.opts.pageLoadsMetricIndex]=1),this.tracker.send("pageview",(0,m.createFieldsObj)(i,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},{key:"trackerSetOverride",value:function(e){var t=this;return function(n,i){var o=(0,m.isObject)(n)?n:r({},n,i);o.page&&o.page!==t.tracker.get("page")&&t.lastPageState==y&&t.handleChange(),e(n,i)}}},{key:"getTimeSinceLastStoredChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hitTime;return e.time?(n||(0,m.now)())-e.time:0}},{key:"handleExternalStoreSet",value:function(e,t){e.time!=t.time&&(t.pageId!=b||t.state!=y||this.session.isExpired(t.sessionId)||this.sendPageVisibilityEvent(t,{hitTime:e.time}))}},{key:"handleWindowUnload",value:function(){"hidden"!=this.lastPageState&&this.handleChange()}},{key:"remove",value:function(){this.store.destroy(),this.session.destroy(),l.default.remove(this.tracker,"set",this.trackerSetOverride),window.removeEventListener("unload",this.handleWindowUnload),document.removeEventListener("visibilitychange",this.handleChange)}}]),e}();(0,h.default)("pageVisibilityTracker",k)},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(3),a=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(4),u=n(2),l=function(){function e(t,n){if(i(this,e),(0,s.trackUsage)(t,s.plugins.SOCIAL_WIDGET_TRACKER),window.addEventListener){var r={fieldsObj:{},hitFilter:null};this.opts=(0,u.assign)(r,n),this.tracker=t,this.addWidgetListeners=this.addWidgetListeners.bind(this),this.addTwitterEventHandlers=this.addTwitterEventHandlers.bind(this),this.handleTweetEvents=this.handleTweetEvents.bind(this),this.handleFollowEvents=this.handleFollowEvents.bind(this),this.handleLikeEvents=this.handleLikeEvents.bind(this),this.handleUnlikeEvents=this.handleUnlikeEvents.bind(this),"complete"!=document.readyState?window.addEventListener("load",this.addWidgetListeners):this.addWidgetListeners()}}return r(e,[{key:"addWidgetListeners",value:function(){window.FB&&this.addFacebookEventHandlers(),window.twttr&&this.addTwitterEventHandlers()}},{key:"addTwitterEventHandlers",value:function(){var e=this;try{window.twttr.ready(function(){window.twttr.events.bind("tweet",e.handleTweetEvents),window.twttr.events.bind("follow",e.handleFollowEvents)})}catch(e){}}},{key:"removeTwitterEventHandlers",value:function(){var e=this;try{window.twttr.ready(function(){window.twttr.events.unbind("tweet",e.handleTweetEvents),window.twttr.events.unbind("follow",e.handleFollowEvents)})}catch(e){}}},{key:"addFacebookEventHandlers",value:function(){try{window.FB.Event.subscribe("edge.create",this.handleLikeEvents),window.FB.Event.subscribe("edge.remove",this.handleUnlikeEvents)}catch(e){}}},{key:"removeFacebookEventHandlers",value:function(){try{window.FB.Event.unsubscribe("edge.create",this.handleLikeEvents),window.FB.Event.unsubscribe("edge.remove",this.handleUnlikeEvents)}catch(e){}}},{key:"handleTweetEvents",value:function(e){if("tweet"==e.region){var t=e.data.url||e.target.getAttribute("data-url")||location.href,n={transport:"beacon",socialNetwork:"Twitter",socialAction:"tweet",socialTarget:t};this.tracker.send("social",(0,u.createFieldsObj)(n,this.opts.fieldsObj,this.tracker,this.opts.hitFilter,e.target,e))}}},{key:"handleFollowEvents",value:function(e){if("follow"==e.region){var t=e.data.screen_name||e.target.getAttribute("data-screen-name"),n={transport:"beacon",socialNetwork:"Twitter",socialAction:"follow",socialTarget:t};this.tracker.send("social",(0,u.createFieldsObj)(n,this.opts.fieldsObj,this.tracker,this.opts.hitFilter,e.target,e))}}},{key:"handleLikeEvents",value:function(e){var t={transport:"beacon",socialNetwork:"Facebook",socialAction:"like",socialTarget:e};this.tracker.send("social",(0,u.createFieldsObj)(t,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},{key:"handleUnlikeEvents",value:function(e){var t={transport:"beacon",socialNetwork:"Facebook",socialAction:"unlike",socialTarget:e};this.tracker.send("social",(0,u.createFieldsObj)(t,this.opts.fieldsObj,this.tracker,this.opts.hitFilter))}},{key:"remove",value:function(){window.removeEventListener("load",this.addWidgetListeners),this.removeFacebookEventHandlers(),this.removeTwitterEventHandlers()}}]),e}();(0,a.default)("socialWidgetTracker",l)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return location.pathname+location.search}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=n(6),u=i(s),l=n(3),c=i(l),h=n(4),d=n(2),f=function(){function e(t,n){if(r(this,e),(0,h.trackUsage)(t,h.plugins.URL_CHANGE_TRACKER),history.pushState&&window.addEventListener){var i={shouldTrackUrlChange:this.shouldTrackUrlChange,trackReplaceState:!1,fieldsObj:{},hitFilter:null};this.opts=(0,d.assign)(i,n),this.tracker=t,this.path=o(),this.pushStateOverride=this.pushStateOverride.bind(this),this.replaceStateOverride=this.replaceStateOverride.bind(this),this.handlePopState=this.handlePopState.bind(this),u.default.add(history,"pushState",this.pushStateOverride),u.default.add(history,"replaceState",this.replaceStateOverride),window.addEventListener("popstate",this.handlePopState)}}return a(e,[{key:"pushStateOverride",value:function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleUrlChange(!0)}}},{key:"replaceStateOverride",value:function(e){var t=this;return function(){e.apply(void 0,arguments),t.handleUrlChange(!1)}}},{key:"handlePopState",value:function(){this.handleUrlChange(!0)}},{key:"handleUrlChange",value:function(e){var t=this;setTimeout(function(){var n=t.path,i=o();if(n!=i&&t.opts.shouldTrackUrlChange.call(t,i,n)&&(t.path=i,t.tracker.set({page:i,title:document.title}),e||t.opts.trackReplaceState)){var r={transport:"beacon"};t.tracker.send("pageview",(0,d.createFieldsObj)(r,t.opts.fieldsObj,t.tracker,t.opts.hitFilter))}},0)}},{key:"shouldTrackUrlChange",value:function(e,t){return!(!e||!t)}},{key:"remove",value:function(){u.default.remove(history,"pushState",this.pushStateOverride),u.default.remove(history,"replaceState",this.replaceStateOverride),window.removeEventListener("popstate",this.handlePopState)}}]),e}();(0,c.default)("urlChangeTracker",f)}],[14]);